(this.webpackJsonpanpiano=this.webpackJsonpanpiano||[]).push([[0],{22:function(e,n,t){e.exports=t(43)},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var a=t(4),c=t.n(a),o=t(14),i=t.n(o),r=t(19),u=function(e,n){return{type:"SET_CONFIG",payload:{name:e,value:n}}},l=t(5),s=t(0),f=t(1),d=function(){function e(){Object(s.a)(this,e)}return Object(f.a)(e,null,[{key:"makeScale",value:function(e){return this.sacleWhite.map((function(n){return n+e}))}},{key:"makeScaleAll",value:function(e){var n=this,t=[];return this.sacleWhite.forEach((function(a){t.push(a+e),n.sacleBlack.includes(a)&&t.push(a+"#"+e)})),t}},{key:"getKeyTones",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===n)return this.makeScaleAll(e);for(var t=[],a=e;a<=n;a++)t=[].concat(Object(l.a)(t),Object(l.a)(this.makeScaleAll(a)));return t}},{key:"initTones",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e.getKeyTones(n,t),c=[];return a.forEach((function(e){c.push({tone:e,isValue:!1})})),c}},{key:"getScale5",value:function(e){return["C3","D3","E3","F3","G3","F3","E3","D3","C3"]}},{key:"getKeyToTone",value:function(n){var t;return e.keyObj.hasOwnProperty(n)&&(t=e.keyObj[n]),t}},{key:"getKeyByTone",value:function(e){var n=this;return Object.keys(this.keyObj).find((function(t){return n.keyObj[t]===e}))}},{key:"getBlackPosition",value:function(e){if(!e.includes("#"))return 0;var n=e.replace("#",""),t=document.querySelector("[data-tone=".concat(n,"]"));return((null===t||void 0===t?void 0:t.getBoundingClientRect().x)||0)+this.positionStart}},{key:"isPrime",value:function(e){return!e.includes("E")&&!e.includes("B")}}]),e}();d.sacleWhite=["C","D","E","F","G","A","B"],d.sacleBlack=["C","D","F","G","A"],d.keyObj={a:"C3",w:"C#3",s:"D3",e:"D#3",d:"E3",f:"F3",t:"F#3",g:"G3",y:"G#3",h:"A3",u:"A#3",j:"B3",i:"B#3",k:"C4"},d.positionStart=30;var b=t(8),v=t(6),y=t(13),m=(new y.a).toDestination(),k=function(){function e(){Object(s.a)(this,e)}return Object(f.a)(e,null,[{key:"trigger",value:function(e){m.triggerAttackRelease(e,"8n")}},{key:"triggerAttackRelease",value:function(e,n,t,a){}}]),e}(),h=function(e){var n=e.tone,t=e.isActive,o=e.onMouseDown,i=e.onMouseUp,r=Object(b.c)((function(e){return e.piano.config.isTonePrint})),u=Object(b.c)((function(e){return e.piano.config.isKeyboradPrint})),l=Object(a.useState)(),s=Object(v.a)(l,2),f=s[0],y=s[1],m=Object(a.useState)(d.isPrime(n)),h=Object(v.a)(m,1)[0];Object(a.useEffect)((function(){y(d.getBlackPosition(n))}),[n]);var O="key ".concat(n.includes("#")?"black":"white"," ").concat(h?"prime":"","\n  ").concat(t?"active":"");return Object(a.useEffect)((function(){t&&k.trigger(n)}),[t]),c.a.createElement("div",{className:O,style:{left:f},onMouseDown:function(){return o(n)},onMouseUp:function(){return i(n)},"data-tone":n},c.a.createElement("div",{className:"label"},u&&c.a.createElement("div",{className:"key__key_name"},d.getKeyByTone(n)),r&&c.a.createElement("div",{className:"key__tone_name"},n)))},O=function(e){Object(r.a)(e);var n=Object(b.c)((function(e){return e.piano.tones})),t=Object(b.b)(),a=function(e){t(function(e){return{type:"PIANO_TRIGGER",payload:e}}(e))},o=function(e){t(function(e){return{type:"PIANO_RELEASE",payload:e}}(e))},i=function(e){var t=d.getKeyToTone(e);if(!t)return null;var a=null===n||void 0===n?void 0:n.findIndex((function(e){return e.tone===t})),c=n[a];return c?c.tone:null},u=function(e){a(e)},l=function(e){o(e)};return c.a.createElement("div",{className:"piano-kyes",onKeyPress:function(e){var n=i(e.key);n&&a(n)},onKeyUp:function(e){var n=i(e.key);n&&o(n)},tabIndex:0},c.a.createElement("div",{className:"piano-kyes__whites"},n&&n.map((function(e){return c.a.createElement(h,{key:e.tone,tone:e.tone,onMouseDown:u,onMouseUp:l,isActive:e.isValue})}))))},p=function(e){var n=e.text,t=e.onClick;return c.a.createElement("button",{className:"mini",onClick:t},n)},E=function(){var e=Object(b.b)(),n=Object(b.c)((function(e){return e.piano.config.isTonePrint})),t=Object(b.c)((function(e){return e.piano.config.isKeyboradPrint}));return c.a.createElement("div",{className:"piano_config"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("input",{type:"checkbox",id:"isPrintBox",checked:n,onChange:function(n){var t=n.target.checked;e(u("isTonePrint",t))}}),c.a.createElement("label",{htmlFor:"isPrintBox"},"\uc74c\uacc4 \ubcf4\uc774\uae30")),c.a.createElement("li",null,c.a.createElement("input",{type:"checkbox",id:"isKeyboardPrintCheckBox",checked:t,onChange:function(n){var t=n.target.checked;e(u("isKeyboradPrint",t))}}),c.a.createElement("label",{htmlFor:"isKeyboardPrintCheckBox"},"\ud0a4\ubcf4\ub4dc \ubcf4\uc774\uae30"))))},j=(new y.a).toDestination();var g=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement(O,null),c.a.createElement(E,null),c.a.createElement(p,{text:"\ud654\uc74c",onClick:function(){var e=d.getScale5("C3"),n=y.b();e.forEach((function(e,t){return j.triggerAttackRelease(e,"8n",n+.5*t)}))}})))};t(42),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=t(7),T=t(3),A={tones:d.initTones(3,4),config:{isTonePrint:!0,isKeyboradPrint:!1}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"PIANO_TRIGGER":var t=n.payload,a=e.tones.findIndex((function(e){return e.tone===t})),c=Object(l.a)(e.tones);return c[a].isValue=!0,Object(T.a)(Object(T.a)({},e),{},{tones:Object(l.a)(c)});case"PIANO_RELEASE":var o=n.payload,i=e.tones.findIndex((function(e){return e.tone===o})),r=Object(l.a)(e.tones);return r[i].isValue=!1,Object(T.a)(Object(T.a)({},e),{},{tones:Object(l.a)(r)});case"SET_PRINT_TONE":return Object(T.a)(Object(T.a)({},e),{},{isPrintTone:n.payload});case"SET_CONFIG":return Object(T.a)(Object(T.a)({},e),{},{config:Object(T.a)(Object(T.a)({},e.config),{},Object(P.a)({},n.payload.name,n.payload.value))});default:return e}},C=t(11),N=t(21),B=Object(C.c)({piano:w}),S=Object(C.d)(B,Object(C.a)(N.a));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b.a,{store:S},c.a.createElement(g,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.48fd3163.chunk.js.map